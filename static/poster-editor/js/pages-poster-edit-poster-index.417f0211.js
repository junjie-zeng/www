(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-poster-edit-poster-index"],{"00cd":function(t,e,n){"use strict";n.r(e);var a=n("bf34"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"0b33":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5530")),o=a(n("c464")),r=a(n("d291")),s=a(n("e9c0")),c=a(n("46b3")),u=n("26cb"),l=a(n("d265")),d=n("86ac"),f={mixins:[o.default,r.default,s.default,c.default],data:function(){return{color:{rgba:{r:48,g:8,b:8,a:.6},key:""}}},computed:(0,i.default)({},(0,u.mapState)(["pageInfo"])),mounted:function(){console.log("mounted .."),this._initBgColor()},methods:(0,i.default)((0,i.default)({},(0,u.mapActions)(["updateContent"])),{},{openColorPicker:function(){this.$showColorPicker("bgColorPicker","open")},confirmColor:function(t){var e=(0,d.getRgbaColor)(t.rgba);this.color.rgba=t.rgba,this.updateContent({key:"background",value:e})},handleUpdateBgColor:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){(0,d.blobToBase64)(e.tempFiles[0],(function(e){t.updateContent({key:"backgroundImage",value:e}),t.updateContent({key:"width",value:"auto"}),t.updateContent({key:"height",value:"auto"})}))}})},handleClearBgColor:function(){this.updateContent({key:"backgroundImage",value:""})},_initBgColor:function(){var t=this.pageInfo.detail;this.color.rgba=(0,d.splitRgbaColor)(t.background)}}),components:{tColorPicker:l.default}};e.default=f},"0e68":function(t,e,n){"use strict";n.r(e);var a=n("0b33"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"12ee":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".hideCanvas[data-v-45f7d283]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}",""]),t.exports=e},1882:function(t,e,n){"use strict";n.r(e);var a=n("ac96"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"1da1":function(t,e,n){"use strict";function a(t,e,n,a,i,o,r){try{var s=t[o](r),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(a,i)}n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function s(t){a(r,i,o,s,c,"next",t)}function c(t){a(r,i,o,s,c,"throw",t)}s(void 0)}))}},n("d3b7")},"29ae":function(t,e,n){"use strict";n.r(e);var a=n("d72b"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"2b0c":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"hideCanvas"},[e("v-uni-canvas",{style:{width:(this.poster.width||1)+"px",height:(this.poster.height||1)+"px"},attrs:{"canvas-id":"poster"}})],1)},i=[]},"2c0f":function(t,e,n){"use strict";n.r(e);var a=n("fe29"),i=n("cf5f");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"f5ffd14e",null,!1,a["a"],void 0);e["default"]=s.exports},"2e02":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={poster:n("daf4").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-setting-box "},[n("v-uni-view",{staticClass:"setting-left"},[n("v-uni-view",{staticClass:"left-item"},[n("v-uni-view",{staticClass:"yuan",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backgroundSetting.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-background"})],1),n("v-uni-text",{staticClass:"desc"},[t._v("背景设置")])],1),n("v-uni-view",{staticClass:"left-item"},[n("v-uni-view",{staticClass:"yuan",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-3jichuyuansu"})],1),n("v-uni-text",{staticClass:"desc"},[t._v("添加元素")])],1),n("v-uni-view",{staticClass:"left-item"},[n("v-uni-view",{staticClass:"yuan delbg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$modal("ps-setting-modal","close")}}},[n("v-uni-text",{staticClass:"iconfont icon-close "})],1)],1)],1),n("v-uni-view",{staticClass:"setting-right"},[n("v-uni-view",{staticClass:"right-item"},[n("v-uni-view",{staticClass:"yuan",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleCreatePoster.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-ok"})],1),n("v-uni-text",{staticClass:"desc"},[t._v("生成海报")])],1)],1),n("poster",{ref:"poster",attrs:{pageInfo:t.pageInfo}})],1)},o=[]},"307a":function(t,e,n){"use strict";n.r(e);var a=n("dcab"),i=n("a60b");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"6c76fa70",null,!1,a["a"],void 0);e["default"]=s.exports},"3bf5":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-add-content-box"},[n("v-uni-view",{staticClass:"content-th"},[n("v-uni-view",{staticClass:"th-title"},[t._v("添加元素")]),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$drawer("add-content-drawer","close")}}})],1),n("v-uni-view",{staticClass:"content-td"},[n("v-uni-view",{staticClass:"td-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add("text")}}},[n("v-uni-view",{staticClass:"iconfont icon-wenzi1"}),n("v-uni-view",{staticClass:"text"},[t._v("文字")])],1),n("v-uni-view",{staticClass:"td-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add("img")}}},[n("v-uni-view",{staticClass:"iconfont icon-tupian"}),n("v-uni-view",{staticClass:"text"},[t._v("图片")])],1)],1)],1)},i=[]},"3d44":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"drag-poster"},[n("v-uni-view",{staticClass:"poster",style:{width:"auto"==t.pageInfo.detail.width?"auto":t.pageInfo.detail.width+"px",height:"auto"==t.pageInfo.detail.height?"auto":t.pageInfo.detail.height+"px",backgroundColor:t.pageInfo.detail.background},attrs:{id:"image-box"}},[n("v-uni-image",{attrs:{src:t.pageInfo.detail.backgroundImage,mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"drag"},[n("v-uni-movable-area",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.currentIndex=-1}}},t._l(t.pageInfo.content,(function(e,a){return n("v-uni-movable-view",{key:a,class:["target",t.currentIndex==a?"sl":""],attrs:{direction:"all",animation:"false",scale:"true",x:e.detail.x,y:e.detail.y},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.currentIndex=a},change:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.updateRect(e,a,"change ...")},scale:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.updateScale(e,a,"scale ...")}}},["text"==e.type?n("v-uni-view",{staticClass:"text",style:{fontSize:e.detail.fontSize+"px",color:e.detail.color,fontFamily:e.detail.fontFamily},attrs:{contenteditable:t.isContenteditable}},[t._v(t._s(e.detail.content))]):t._e(),"img"==e.type?n("v-uni-view",{staticClass:"img",style:{width:e.detail.width+"rpx",height:e.detail.height+"rpx",borderRadius:e.detail.borderRadius+"%",overflow:"hidden",backgroundColor:e.detail.bgColor}},[n("v-uni-image",{attrs:{src:e.detail.url,name:e.detail.url}})],1):t._e(),t.currentIndex==a?n("v-uni-view",[n("v-uni-view",{staticClass:"operator-item edit-ele",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.editItem(a)}}},[n("v-uni-view",{staticClass:" iconfont icon-bianji"})],1),n("v-uni-view",{staticClass:"operator-item del-ele",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.del(a)}}},[n("v-uni-view",{staticClass:" iconfont icon-shanchu"})],1),n("v-uni-view",{staticClass:"operator-item copy-ele",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.copy(a)}}},[n("v-uni-view",{staticClass:" iconfont icon-fuzhi-"})],1)],1):t._e()],1)})),1)],1)],1)},i=[]},"3f9b":function(t,e,n){"use strict";n.r(e);var a=n("2e02"),i=n("4e8a");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"07ec1b1f",null,!1,a["a"],void 0);e["default"]=s.exports},"46b3":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("8861")),o={data:function(){return{}},mounted:function(){var t=this;i.default.$on("colorPicker",(function(e){var n=e.e,a=e.type;t.showColorPicker(n,a)}))},methods:{showColorPicker:function(t,e){this.$refs[t]&&this.$refs[t][e]()},$showColorPicker:function(t,e){console.log("$showColorPicker ..."),i.default.$emit("colorPicker",{e:t,type:e})}},destroyed:function(){}};e.default=o},"4cb9":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e9c4"),n("d3b7"),n("159b"),n("a434"),n("14d9");var i=a(n("5530")),o=a(n("c464")),r=a(n("d291")),s=a(n("b0b2")),c=n("26cb"),u={mixins:[o.default,r.default,s.default],props:{currentEditType:{default:"new",type:String}},data:function(){return{posterName:""}},mounted:function(){this.posterName=this.pageInfo.name},computed:(0,i.default)({},(0,c.mapState)(["posterUrl","pageInfo"])),methods:{saveLocal:function(){var t=localStorage.getItem("localPageList"),e=JSON.parse(JSON.stringify(this.pageInfo)),n=[];if(this.posterName){if(t){if(n=JSON.parse(t),n.length>5)return void uni.showToast({title:"本地最多保存2张海报",icon:"none"})}else n=[];"new"==this.currentEditType?(e.id=Date.now(),e.type="my"):n.forEach((function(t,a){var i=t.id;i==e.id&&(e.id=t.id,e.type=t.type,n.splice(a,1))})),e.url=this.posterUrl,e.name=this.posterName,n.push(e),console.log(e);try{localStorage.setItem("localPageList",JSON.stringify(n)),uni.showToast({title:"保存成功",icon:"success",success:function(){console.log("success"),uni.switchTab({url:"/pages/index/works/works"})}})}catch(a){uni.showToast({title:"保存失败，内容超出",icon:"none"})}}else uni.showToast({title:"海报名称不能为空",icon:"none"})}}};e.default=u},"4e8a":function(t,e,n){"use strict";n.r(e);var a=n("f4da"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},6963:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={tColorPicker:n("d265").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-edit-content-box"},[n("v-uni-view",{staticClass:"content-th"},[n("v-uni-view",{staticClass:"th-title"},[t._v("编辑元素")]),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$drawer("add-content-drawer","close")}}})],1),n("v-uni-view",{staticClass:"content-td"},[t.currentItem&&"text"==t.currentItem.type?n("v-uni-view",[n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("颜色")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"colors"},[n("v-uni-view",{staticClass:"color-item",style:{background:"rgba("+t.color.rgba.r+","+t.color.rgba.g+","+t.color.rgba.b+","+t.color.rgba.a+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openColorPicker.apply(void 0,arguments)}}})],1)],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("文字")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-input",{attrs:{value:t.currentItem.detail.content,"confirm-type":"search",placeholder:"请输入文本/文本不能为空"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyInput(e,"content")}}})],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("大小")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-slider",{attrs:{value:t.currentItem.detail.fontSize,min:"12",max:"88","show-value":!0,step:"5"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sliderChange(e,"fontSize")}}})],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("字体")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"set-font-weight"},[n("v-uni-picker",{attrs:{value:t.font.fontWeightIndex,range:t.font.fontWeightArray},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindFontWeight.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.font.fontWeightArray[t.font.fontWeightIndex]))])],1)],1)],1)],1)],1):t._e(),t.currentItem&&"img"==t.currentItem.type?n("v-uni-view",[n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("背景颜色")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"colors"},[n("v-uni-view",{staticClass:"color-item",style:{background:"rgba("+t.color.rgba.r+","+t.color.rgba.g+","+t.color.rgba.b+","+t.color.rgba.a+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openColorPicker.apply(void 0,arguments)}}})],1)],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("圆角")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-slider",{attrs:{value:t.currentItem.detail.borderRadius,min:"0",max:"50","show-value":!0,step:"5"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sliderChange(e,"borderRadius")}}})],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("图片")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"set-image"},[t.currentItem.detail.url?n("v-uni-image",{attrs:{src:t.currentItem.detail.url,mode:"widthFix"}}):n("v-uni-view",{staticClass:"not-img iconfont icon-tupian"}),n("v-uni-view",{staticClass:"set-image-btn"},[n("v-uni-view",{staticClass:"iconfont icon-shangchuantupian",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delImage.apply(void 0,arguments)}}})],1)],1)],1)],1)],1):t._e()],1),n("t-color-picker",{ref:"colorPicker",attrs:{color:t.color.rgba},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmColor.apply(void 0,arguments)}}})],1)},o=[]},"6ea5":function(t,e,n){var a=n("f650");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("480a0632",a,!0,{sourceMap:!1,shadowMode:!1})},"751c":function(t,e,n){"use strict";var a=n("77c5"),i=n.n(a);i.a},"77c5":function(t,e,n){var a=n("12ee");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("adcb52f2",a,!0,{sourceMap:!1,shadowMode:!1})},"7af7":function(t,e,n){"use strict";n.r(e);var a=n("f057"),i=n("0e68");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"0d59c396",null,!1,a["a"],void 0);e["default"]=s.exports},"82d3":function(t,e,n){"use strict";n.r(e);var a=n("3d44"),i=n("1882");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"c529215e",null,!1,a["a"],void 0);e["default"]=s.exports},"84c7":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("c7eb")),o=a(n("1da1")),r=a(n("5530")),s=n("26cb"),c=a(n("c464")),u=a(n("d291")),l=a(n("b0b2")),d=a(n("e9c0")),f=a(n("46b3")),v=a(n("82d3")),h=a(n("3f9b")),p=a(n("2c0f")),g=a(n("bfe8")),b=a(n("9a58")),m=a(n("7af7")),w=a(n("d265")),y={mixins:[c.default,u.default,l.default,d.default,f.default],data:function(){return{testUrl:"",currentEditType:"",color:{r:255,g:0,b:0,a:.6}}},computed:(0,r.default)({},(0,s.mapState)(["pageInfo"])),onLoad:function(t){var e=t.id,n=t.type;this.getPageInfo(e),this.currentEditType=n},mounted:function(){},methods:(0,r.default)((0,r.default)({},(0,s.mapActions)(["updateContent","getPageInfo"])),{},{operation:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.modal("ps-setting-modal","open");case 1:case"end":return e.stop()}}),e)})))()},confirm:function(t){console.log("颜色选择器返回值："+t.hex),this.modifyCurrentItem("color",t.hex)}}),components:{drag:v.default,operationSettingModal:h.default,createPosterModal:p.default,addContentDrawer:g.default,editContentDrawer:b.default,backgroundSetDrawer:m.default,tColorPicker:w.default}};e.default=y},"86ac":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.splitRgbaColor=e.getRgbaColor=e.blobToBase64=void 0,n("99af"),n("ac1f"),n("466d");e.blobToBase64=function(t,e){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){var t=n.result;e&&e(t)}};e.getRgbaColor=function(t){var e=t.r,n=t.g,a=t.b,i=t.a;return"rgba(".concat(e,",").concat(n,",").concat(a,",").concat(i,")")};e.splitRgbaColor=function(t){var e,n,a,i,o=t.match(/[\d.]+/g);if(o.length>=3)return e=o[0],n=o[1],a=o[2],i=o[3]||1,{r:e,g:n,b:a,a:i}}},8861:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("e143")),o=new i.default;e.default=o},"8ffd":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("e143")),o=new i.default;e.default=o},"9a58":function(t,e,n){"use strict";n.r(e);var a=n("6963"),i=n("00cd");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"5140b93d",null,!1,a["a"],void 0);e["default"]=s.exports},a60b:function(t,e,n){"use strict";n.r(e);var a=n("84c7"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},a809:function(t,e,n){"use strict";n.r(e);var a=n("bedb"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},a9fc:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("3835"));n("e25e"),n("d401"),n("d3b7"),n("25f0"),n("d81d"),n("ac1f");var o={props:{color:{type:Object,default:function(){return{r:0,g:0,b:0,a:0}}},spareColor:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,active:!1,rgba:{r:0,g:0,b:0,a:1},hsb:{h:0,s:0,b:0},site:[{top:0,left:0},{left:0},{left:0}],index:0,bgcolor:{r:255,g:0,b:0,a:1},hex:"#000000",mode:!0,colorList:[{r:244,g:67,b:54,a:1},{r:233,g:30,b:99,a:1},{r:156,g:39,b:176,a:1},{r:103,g:58,b:183,a:1},{r:63,g:81,b:181,a:1},{r:33,g:150,b:243,a:1},{r:3,g:169,b:244,a:1},{r:0,g:188,b:212,a:1},{r:0,g:150,b:136,a:1},{r:76,g:175,b:80,a:1},{r:139,g:195,b:74,a:1},{r:205,g:220,b:57,a:1},{r:255,g:235,b:59,a:1},{r:255,g:193,b:7,a:1},{r:255,g:152,b:0,a:1},{r:255,g:87,b:34,a:1},{r:121,g:85,b:72,a:1},{r:158,g:158,b:158,a:1},{r:0,g:0,b:0,a:.5},{r:0,g:0,b:0,a:0}]}},created:function(){this.rgba=this.color,0!==this.spareColor.length&&(this.colorList=this.spareColor)},methods:{init:function(){this.hsb=this.rgbToHex(this.rgba),this.setValue(this.rgba)},moveHandle:function(){},open:function(){var t=this;this.show=!0,this.$nextTick((function(){t.init(),setTimeout((function(){t.active=!0,setTimeout((function(){t.getSelectorQuery()}),350)}),50)}))},close:function(){var t=this;this.active=!1,this.$nextTick((function(){setTimeout((function(){t.show=!1}),500)}))},confirm:function(){this.close(),this.$emit("confirm",{rgba:this.rgba,hex:this.hex})},select:function(){this.mode=!this.mode},selectColor:function(t){this.setColorBySelect(t)},touchstart:function(t,e){var n=t.touches[0],a=n.pageX,i=n.pageY;this.pageX=a,this.pageY=i,this.setPosition(a,i,e)},touchmove:function(t,e){var n=t.touches[0],a=n.pageX,i=n.pageY;this.moveX=a,this.moveY=i,this.setPosition(a,i,e)},touchend:function(t,e){},setPosition:function(t,e,n){this.index=n;var a=this.position[n],i=a.top,o=a.left,r=a.width,s=a.height;this.site[n].left=Math.max(0,Math.min(parseInt(t-o),r)),0===n?(this.site[n].top=Math.max(0,Math.min(parseInt(e-i),s)),this.hsb.s=parseInt(100*this.site[n].left/r),this.hsb.b=parseInt(100-100*this.site[n].top/s),this.setColor(),this.setValue(this.rgba)):this.setControl(n,this.site[n].left)},setColor:function(){var t=this.HSBToRGB(this.hsb);this.rgba.r=t.r,this.rgba.g=t.g,this.rgba.b=t.b},setValue:function(t){this.hex="#"+this.rgbToHex(t)},setControl:function(t,e){var n=this.position[t],a=(n.top,n.left,n.width);n.height;1===t?(this.hsb.h=parseInt(360*e/a),this.bgcolor=this.HSBToRGB({h:this.hsb.h,s:100,b:100}),this.setColor()):this.rgba.a=(e/a).toFixed(1),this.setValue(this.rgba)},rgbToHex:function(t){var e=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.map((function(t,n){1==t.length&&(e[n]="0"+t)})),e.join("")},setColorBySelect:function(t){var e,n=t.r,a=t.g,i=t.b,o=t.a;e={r:n?parseInt(n):0,g:a?parseInt(a):0,b:i?parseInt(i):0,a:o||0},this.rgba=e,this.hsb=this.rgbToHsb(e),this.changeViewByHsb()},changeViewByHsb:function(){var t=(0,i.default)(this.position,3),e=t[0],n=t[1],a=t[2];this.site[0].left=parseInt(this.hsb.s*e.width/100),this.site[0].top=parseInt((100-this.hsb.b)*e.height/100),this.setColor(this.hsb.h),this.setValue(this.rgba),this.bgcolor=this.HSBToRGB({h:this.hsb.h,s:100,b:100}),this.site[1].left=this.hsb.h/360*n.width,this.site[2].left=this.rgba.a*a.width},HSBToRGB:function(t){var e={},n=Math.round(t.h),a=Math.round(255*t.s/100),i=Math.round(255*t.b/100);if(0==a)e.r=e.g=e.b=i;else{var o=i,r=(255-a)*i/255,s=n%60*(o-r)/60;360==n&&(n=0),n<60?(e.r=o,e.b=r,e.g=r+s):n<120?(e.g=o,e.b=r,e.r=o-s):n<180?(e.g=o,e.r=r,e.b=r+s):n<240?(e.b=o,e.r=r,e.g=o-s):n<300?(e.b=o,e.g=r,e.r=r+s):n<360?(e.r=o,e.g=r,e.b=o-s):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},rgbToHsb:function(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),a=Math.max(t.r,t.g,t.b),i=a-n;return e.b=a,e.s=0!=a?255*i/a:0,0!=e.s?t.r==a?e.h=(t.g-t.b)/i:t.g==a?e.h=2+(t.b-t.r)/i:e.h=4+(t.r-t.g)/i:e.h=-1,e.h*=60,e.h<0&&(e.h=0),e.s*=100/255,e.b*=100/255,e},getSelectorQuery:function(){var t=this,e=uni.createSelectorQuery().in(this);e.selectAll(".boxs").boundingClientRect((function(e){e&&0!==e.length?(t.position=e,t.setColorBySelect(t.rgba)):setTimeout((function(){return t.getSelectorQuery()}),20)})).exec()}},watch:{spareColor:function(t){this.colorList=t}}};e.default=o},ac96:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5530")),o=a(n("c464")),r=a(n("d291")),s=a(n("b0b2")),c=a(n("e9c0")),u=n("26cb"),l={mixins:[o.default,r.default,s.default,c.default],data:function(){return{fontWeightIndex:0,fontWeightArray:[1,2,3],touchStartTime:0,isContenteditable:!1,currentIndex:-1}},computed:(0,i.default)({},(0,u.mapState)(["pageInfo"])),mounted:function(){},methods:(0,i.default)((0,i.default)({},(0,u.mapActions)(["changeCoordinate","setEditIndex","delContent","copyContent","scaleElement"])),{},{editItem:function(t){this.setEditIndex(t),this.$drawer("edit-content-drawer","open"),this.currentIndex=t},updateRect:function(t,e,n){var a=t.detail,i=a.x,o=a.y,r=a.source;r&&"touch"==r&&(console.log({x:i,y:o,source:r}),this.changeCoordinate({index:e,x:i,y:o})),this.currentIndex=e},updateScale:function(t){var e=t.detail;e.x,e.y,e.scale;console.log(t)},del:function(t){this.delContent(t)},copy:function(t){this.copyContent(t)}})};e.default=l},b0b2:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("8861")),o={data:function(){return{}},mounted:function(){var t=this;i.default.$on("popup",(function(e){var n=e.e,a=e.type;t.modal(n,a)}))},methods:{modal:function(t,e){this.$refs[t]&&this.$refs[t][e]()},$modal:function(t,e){console.log("$modal ..."),i.default.$emit("popup",{e:t,type:e})}},destroyed:function(){}};e.default=o},b40a:function(t,e,n){"use strict";n.r(e);var a=n("a9fc"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},b636:function(t,e,n){var a=n("e065");a("asyncIterator")},bedb:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("5530")),o=a(n("c464")),r=a(n("d291")),s=a(n("e9c0")),c=n("26cb"),u={mixins:[o.default,r.default,s.default],methods:(0,i.default)((0,i.default)({},(0,c.mapActions)(["addContent"])),{},{add:function(t){var e=null;switch(t){case"text":e={id:0,type:"text",detail:{x:20,y:20,fontSize:20,content:"Nike",color:"rgba(0,0,0,1)",fontFamily:"微软雅黑"}};break;case"img":e={id:2,type:"img",detail:{x:20,y:20,width:100,height:100,url:"../../../static/image/nike.jpg",borderRadius:10,bgColor:"rgba(255,192,203,1)"}};break}this.addContent(e),this.$drawer("add-content-drawer","close")}})};e.default=u},bf34:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c740");var i=a(n("5530")),o=a(n("c464")),r=a(n("d291")),s=a(n("e9c0")),c=a(n("46b3")),u=n("26cb"),l=n("86ac"),d=a(n("d265")),f={mixins:[o.default,r.default,s.default,c.default],data:function(){return{font:{fontWeightIndex:0,fontWeightArray:["宋体","新宋体","微软雅黑","楷体","黑体","隶书","Arial","Verdana","Times New Roman","Lucida Sans Unicode","MS Serif","Comic Sans MS"]},currentItem:null,colorList:["#000000","#ffffff","#ff1d20","#ffaa00","#ffff00","#55ff00","#0565ff","#55ffff","#8800ff"],color:{rgba:{r:48,g:8,b:8,a:.6},key:""}}},computed:(0,i.default)({},(0,u.mapState)(["editIndex","pageInfo"])),mounted:function(){this._initCurrentItem()},methods:(0,i.default)((0,i.default)({},(0,u.mapActions)(["updateContentDetail"])),{},{bindFontWeight:function(t){this.font.fontWeightIndex=t.target.value;var e=this.font.fontWeightArray[this.font.fontWeightIndex];this.updateContentDetail({key:"fontFamily",value:e})},modifyCurrentItem:function(t,e){this.updateContentDetail({key:t,value:e})},openColorPicker:function(){this.$showColorPicker("colorPicker","open")},confirmColor:function(t){var e=(0,l.getRgbaColor)(t.rgba),n=this.color.key;this.color.rgba=t.rgba,this.modifyCurrentItem(n,e)},sliderChange:function(t,e){var n=t.detail.value;this.updateContentDetail({key:e,value:n})},onKeyInput:function(t,e){var n=t.detail.value;this.updateContentDetail({key:e,value:n})},chooseImage:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){(0,l.blobToBase64)(e.tempFiles[0],(function(e){t.currentItem.detail.url=e,t.updateContentDetail({key:"url",value:e})}))}})},delImage:function(){this.modifyCurrentItem("url",""),this.currentItem.detail.url=""},_initCurrentItem:function(){this.currentItem=this.pageInfo.content[this.editIndex];var t=this.currentItem.type;if("text"==t){var e=this.currentItem.detail,n=e.fontFamily,a=e.color;this.font.fontWeightIndex=this.font.fontWeightArray.findIndex((function(t,e){return t==n})),this.color.rgba=(0,l.splitRgbaColor)(a),this.color.key="color"}else if("img"==t){var i=this.currentItem.detail,o=(i.url,i.bgColor);this.color.rgba=(0,l.splitRgbaColor)(o),this.color.key="bgColor"}}}),components:{tColorPicker:d.default}};e.default=f},bfe8:function(t,e,n){"use strict";n.r(e);var a=n("3bf5"),i=n("a809");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"2fe35e0c",null,!1,a["a"],void 0);e["default"]=s.exports},c2e1:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"t-wrapper",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"t-mask",class:{active:t.active},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"t-box",class:{active:t.active}},[n("v-uni-view",{staticClass:"t-header"},[n("v-uni-view",{staticClass:"t-header-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[t._v("取消")]),n("v-uni-view",{staticClass:"t-header-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确认")])],1),n("v-uni-view",{staticClass:"t-color__box",style:{background:"rgb("+t.bgcolor.r+","+t.bgcolor.g+","+t.bgcolor.b+")"}},[n("v-uni-view",{staticClass:"t-background boxs",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart(e,0)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove(e,0)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend(e,0)}}},[n("v-uni-view",{staticClass:"t-color-mask"}),n("v-uni-view",{staticClass:"t-pointer",style:{top:t.site[0].top-8+"px",left:t.site[0].left-8+"px"}})],1)],1),n("v-uni-view",{staticClass:"t-control__box"},[n("v-uni-view",{staticClass:"t-control__color"},[n("v-uni-view",{staticClass:"t-control__color-content",style:{background:"rgba("+t.rgba.r+","+t.rgba.g+","+t.rgba.b+","+t.rgba.a+")"}})],1),n("v-uni-view",{staticClass:"t-control-box__item"},[n("v-uni-view",{staticClass:"t-controller boxs",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart(e,1)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove(e,1)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend(e,1)}}},[n("v-uni-view",{staticClass:"t-hue"},[n("v-uni-view",{staticClass:"t-circle",style:{left:t.site[1].left-12+"px"}})],1)],1),n("v-uni-view",{staticClass:"t-controller boxs",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart(e,2)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove(e,2)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend(e,2)}}},[n("v-uni-view",{staticClass:"t-transparency"},[n("v-uni-view",{staticClass:"t-circle",style:{left:t.site[2].left-12+"px"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"t-alternative"},t._l(t.colorList,(function(e,a){return n("v-uni-view",{key:a,staticClass:"t-alternative__item"},[n("v-uni-view",{staticClass:"t-alternative__item-content",style:{background:"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.selectColor(e)}}})],1)})),1)],1)],1)},i=[]},c464:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("8ffd")),o={data:function(){return{}},onLoad:function(t){},methods:{close:function(t,e,n){i.default.$emit(t,{key:e,status:n})},open:function(t,e,n){i.default.$emit(t,{key:e,status:n})}}};e.default=o},c7eb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e.default=function(){return t};var t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(S){l=function(t,e,n){return t[e]=n}}function d(t,e,n,a){var i=e&&e.prototype instanceof h?e:h,r=Object.create(i.prototype),s=new E(a||[]);return o(r,"_invoke",{value:k(t,n,s)}),r}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(S){return{type:"throw",arg:S}}}t.wrap=d;var v={};function h(){}function p(){}function g(){}var b={};l(b,s,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(P([])));w&&w!==n&&i.call(w,s)&&(b=w);var y=g.prototype=h.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){var n;o(this,"_invoke",{value:function(o,r){function s(){return new e((function(n,s){(function n(o,r,s,c){var u=f(t[o],t,r);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==(0,a.default)(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)})(o,r,n,s)}))}return n=n?n.then(s,s):s()}})}function k(t,e,n){var a="suspendedStart";return function(i,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var r=n.delegate;if(r){var s=_(r,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=f(t,e,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}function _(t,e){var n=e.method,a=t.iterator[n];if(void 0===a)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(a,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function P(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=g,o(y,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:p,configurable:!0}),p.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},x(C.prototype),l(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,a,i,o){void 0===o&&(o=Promise);var r=new C(d(e,n,a,i),o);return t.isGeneratorFunction(n)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},x(y),l(y,u,"Generator"),l(y,s,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var a in e)n.push(a);return n.reverse(),function t(){for(;n.length;){var a=n.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return r.type="throw",r.arg=t,e.next=n,a&&(e.method="next",e.arg=void 0),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],r=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),$(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;$(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},t},n("7a82"),n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("d9e2"),n("d401"),n("14d9"),n("159b"),n("131a"),n("26e9"),n("fb6a");var a=function(t){return t&&t.__esModule?t:{default:t}}(n("53ca"))},cb29:function(t,e,n){var a=n("23e7"),i=n("81d5"),o=n("44d2");a({target:"Array",proto:!0},{fill:i}),o("fill")},cf5f:function(t,e,n){"use strict";n.r(e);var a=n("4cb9"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},d265:function(t,e,n){"use strict";n.r(e);var a=n("c2e1"),i=n("b40a");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("d880");var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"4aaf358c",null,!1,a["a"],void 0);e["default"]=s.exports},d291:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("d3b7"),n("ac1f");var a={methods:{getClientRect:function(t){return new Promise((function(e){uni.createSelectorQuery().selectAll(t).boundingClientRect((function(t){e(t[0])})).exec()}))}}};e.default=a},d72b:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("d3b7"),n("159b"),n("99af"),n("cb29");var a={data:function(){return{poster:{},canvasId:"poster"}},methods:{createPoster:function(t,e){var n=this,a=t.detail,i=t.content,o=a.width,r=a.height;console.log(o,r);var s=uni.createCanvasContext(this.canvasId);this.$set(this.poster,"width",o),this.$set(this.poster,"height",r),a.backgroundImage&&s.drawImage(a.backgroundImage,0,0,o,r),a.backgroundImage||(s.drawImage("../../../static/image/default.png",0,0,0,0),s.setFillStyle(a.background),s.fillRect(0,0,o,r)),i.forEach((function(t){var e=t.detail;switch(t.type){case"text":s.setFillStyle(e.color),s.font="".concat(e.fontSize,"px ").concat(e.fontFamily),s.fillText(e.content,e.x,e.y+20);break;case"img":var n=e.x,a=e.y,i=e.borderRadius/2,o=e.width/2,r=e.height/2;s.save(),s.beginPath(),s.setFillStyle("transparent"),s.arc(n+i,a+i,i,Math.PI,1.5*Math.PI),s.moveTo(n+i,a),s.lineTo(n+o-i,a),s.lineTo(n+o,a+i),s.arc(n+o-i,a+i,i,1.5*Math.PI,2*Math.PI),s.lineTo(n+o,a+r-i),s.lineTo(n+o-i,a+r),s.arc(n+o-i,a+r-i,i,0,.5*Math.PI),s.lineTo(n+i,a+r),s.lineTo(n,a+r-i),s.arc(n+i,a+r-i,i,.5*Math.PI,Math.PI),s.lineTo(n,a+i),s.lineTo(n+i,a),s.fill(),s.closePath(),s.clip(),e.url?s.drawImage(e.url,e.x,e.y,e.width/2,e.height/2):(s.setFillStyle(e.bgColor),s.fillRect(e.x,e.y,e.width/2,e.height/2)),s.restore();break;default:break}})),s.draw(!1,(function(){uni.canvasToTempFilePath({canvasId:"poster",success:function(t){e&&e(t)},fail:function(t){console.log(t)}},n)}))}}};e.default=a},d880:function(t,e,n){"use strict";var a=n("6ea5"),i=n.n(a);i.a},daf4:function(t,e,n){"use strict";n.r(e);var a=n("2b0c"),i=n("29ae");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("751c");var r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"45f7d283",null,!1,a["a"],void 0);e["default"]=s.exports},dcab:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniDrawer:n("95cd").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("appHeader",{attrs:{option:"back",title:t.pageInfo.name}}),n("v-uni-view",{staticClass:"ps-opertion-btn"},[n("v-uni-view",{staticClass:"setting",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.operation.apply(void 0,arguments)}}},[n("v-uni-view",{}),t._v("+")],1)],1),n("drag"),n("uniPopup",{ref:"ps-setting-modal"},[n("operation-setting-modal")],1),n("uniPopup",{ref:"ps-create-poster-modal"},[n("create-poster-modal",{attrs:{currentEditType:t.currentEditType}})],1),n("uni-drawer",{ref:"add-content-drawer",attrs:{mode:"left"}},[n("add-content-drawer")],1),n("uni-drawer",{ref:"edit-content-drawer",attrs:{mode:"right"}},[n("edit-content-drawer")],1),n("uni-drawer",{ref:"bg-set-drawer",attrs:{mode:"left"}},[n("background-set-drawer")],1)],1)},o=[]},e9c0:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("8861")),o={data:function(){return{}},mounted:function(){var t=this;i.default.$on("drawer",(function(e){var n=e.e,a=e.type;t.drawer(n,a)}))},methods:{drawer:function(t,e){this.$refs[t]&&this.$refs[t][e]()},$drawer:function(t,e){console.log("$drawer ..."),i.default.$emit("drawer",{e:t,type:e})}},destroyed:function(){}};e.default=o},f057:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={tColorPicker:n("d265").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"bg-set-box"},[n("v-uni-view",{staticClass:"content-th"},[n("v-uni-view",{staticClass:"th-title"},[t._v("背景设置")]),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$drawer("bg-set-drawer","close")}}})],1),t.pageInfo?n("v-uni-view",{staticClass:"content-td"},[n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("背景颜色")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"colors"},[n("v-uni-view",{staticClass:"color-item",style:{background:"rgba("+t.color.rgba.r+","+t.color.rgba.g+","+t.color.rgba.b+","+t.color.rgba.a+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openColorPicker.apply(void 0,arguments)}}})],1)],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("背景图片")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"set-image"},[t.pageInfo.detail.backgroundImage?n("v-uni-image",{attrs:{src:t.pageInfo.detail.backgroundImage,mode:"widthFix"}}):n("v-uni-view",{staticClass:"not-img iconfont icon-tupian"}),n("v-uni-view",{staticClass:"set-image-btn"},[n("v-uni-view",{staticClass:"iconfont icon-shangchuantupian",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleUpdateBgColor.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClearBgColor.apply(void 0,arguments)}}})],1)],1)],1)],1)],1):t._e(),n("t-color-picker",{ref:"bgColorPicker",attrs:{color:t.color.rgba},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmColor.apply(void 0,arguments)}}})],1)},o=[]},f4da:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("c7eb")),o=a(n("1da1")),r=a(n("5530")),s=a(n("c464")),c=a(n("d291")),u=a(n("b0b2")),l=a(n("e9c0")),d=(a(n("daf4")),n("86ac"),n("26cb")),f={mixins:[s.default,c.default,u.default,l.default],computed:(0,r.default)({},(0,d.mapState)(["pageInfo"])),methods:(0,r.default)((0,r.default)({},(0,d.mapActions)(["updateContent","setPosterUrl"])),{},{open:function(){this.$drawer("add-content-drawer","open"),this._closeSettingModal()},backgroundSetting:function(){this.$drawer("bg-set-drawer","open"),this._closeSettingModal()},handleCreatePoster:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){var n,a,o;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"正在生成"}),e.prev=1,e.next=4,t.getClientRect("#image-box");case 4:n=e.sent,a=n.width,o=n.height,console.log(a,o),t.updateContent({key:"width",value:a}),t.updateContent({key:"height",value:o}),t.$refs.poster.createPoster(t.pageInfo,(function(e){uni.hideLoading(),t.setPosterUrl(e.tempFilePath),t._closeSettingModal(),t.$modal("ps-create-poster-modal","open")})),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log("create poster ...",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))()},_closeSettingModal:function(){this.$modal("ps-setting-modal","close")}})};e.default=f},f650:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".t-wrapper[data-v-4aaf358c]{position:fixed;top:0;bottom:0;left:0;width:100%;box-sizing:border-box;z-index:9999}.t-box[data-v-4aaf358c]{width:100%;position:absolute;bottom:0;top:%?90?%;padding:%?30?% 0;padding-top:0;background:#fff;transition:all .3s;-webkit-transform:translateY(100%);transform:translateY(100%)}.t-box.active[data-v-4aaf358c]{-webkit-transform:translateY(0);transform:translateY(0)}.t-header[data-v-4aaf358c]{display:flex;justify-content:space-between;width:100%;height:%?100?%;border-bottom:1px #eee solid;box-shadow:1px 0 2px rgba(0,0,0,.1);background:#fff}.t-header-button[data-v-4aaf358c]{display:flex;align-items:center;width:%?150?%;height:%?100?%;font-size:%?30?%;color:#666;padding-left:%?20?%}.t-header-button[data-v-4aaf358c]:last-child{justify-content:flex-end;padding-right:%?20?%}.t-mask[data-v-4aaf358c]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:-1;transition:all .3s;opacity:0}.t-mask.active[data-v-4aaf358c]{opacity:1}.t-color__box[data-v-4aaf358c]{position:relative;height:%?400?%;background:red;overflow:hidden;box-sizing:border-box;margin:0 %?20?%;margin-top:%?20?%;box-sizing:border-box}.t-background[data-v-4aaf358c]{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.t-color-mask[data-v-4aaf358c]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:%?400?%;background:linear-gradient(0deg,#000,transparent)}.t-pointer[data-v-4aaf358c]{position:absolute;bottom:-8px;left:-8px;z-index:2;width:15px;height:15px;border:1px #fff solid;border-radius:50%}.t-show-color[data-v-4aaf358c]{width:%?100?%;height:%?50?%}.t-control__box[data-v-4aaf358c]{margin-top:%?50?%;width:100%;display:flex;padding-left:%?20?%;box-sizing:border-box}.t-control__color[data-v-4aaf358c]{flex-shrink:0;width:%?100?%;height:%?100?%;border-radius:50%;background-color:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-size:%?36?% %?36?%;background-position:0 0,%?18?% %?18?%;border:1px #eee solid;overflow:hidden}.t-control__color-content[data-v-4aaf358c]{width:100%;height:100%}.t-control-box__item[data-v-4aaf358c]{display:flex;flex-direction:column;justify-content:space-between;width:100%;padding:0 %?30?%}.t-controller[data-v-4aaf358c]{position:relative;width:100%;height:16px;background-color:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-size:%?32?% %?32?%;background-position:0 0,%?16?% %?16?%}.t-hue[data-v-4aaf358c]{width:100%;height:100%;background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.t-transparency[data-v-4aaf358c]{width:100%;height:100%;background:linear-gradient(90deg,transparent 0,#000)}.t-circle[data-v-4aaf358c]{position:absolute;\n\t/* right: -10px; */top:-2px;width:20px;height:20px;box-sizing:border-box;border-radius:50%;background:#fff;box-shadow:0 0 2px 1px rgba(0,0,0,.1)}.t-result__box[data-v-4aaf358c]{margin-top:%?20?%;padding:%?10?%;width:100%;display:flex;box-sizing:border-box}.t-result__item[data-v-4aaf358c]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?10?%;width:100%;box-sizing:border-box}.t-result__box-input[data-v-4aaf358c]{padding:%?10?% 0;width:100%;font-size:%?28?%;box-shadow:0 0 1px 1px rgba(0,0,0,.1);color:#999;text-align:center;background:#fff}.t-result__box-text[data-v-4aaf358c]{margin-top:%?10?%;font-size:%?28?%;line-height:2}.t-select[data-v-4aaf358c]{flex-shrink:0;width:%?150?%;padding:0 %?30?%}.t-select .t-result__box-input[data-v-4aaf358c]{border-radius:%?10?%;border:none;color:#999;box-shadow:1px 1px 2px 1px rgba(0,0,0,.1);background:#fff}.t-select .t-result__box-input[data-v-4aaf358c]:active{box-shadow:0 0 1px 0 rgba(0,0,0,.1)}.t-alternative[data-v-4aaf358c]{display:flex;flex-wrap:wrap;justify-content:space-between;width:100%;padding-top:%?30?%;padding-right:%?25?%;box-sizing:border-box}.t-alternative__item[data-v-4aaf358c]{margin-left:%?12?%;margin-top:%?10?%;width:%?50?%;height:%?50?%;border-radius:%?10?%;background-color:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-size:%?36?% %?36?%;background-position:0 0,%?18?% %?18?%;border:1px #eee solid;overflow:hidden}.t-alternative__item-content[data-v-4aaf358c]{width:%?50?%;height:%?50?%;background:rgba(255,0,0,.5)}.t-alternative__item[data-v-4aaf358c]:active{transition:all .3s;-webkit-transform:scale(1.1);transform:scale(1.1)}",""]),t.exports=e},fe29:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-create-poster"},[n("v-uni-view",{staticClass:"ps-create-box"},[n("v-uni-view",{staticClass:"poster-heder"},[n("v-uni-text",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$modal("ps-create-poster-modal","close")}}})],1),t.posterUrl?n("v-uni-view",{staticClass:"poster-body"},[n("v-uni-image",{attrs:{src:t.posterUrl,mode:"widthFix"}})],1):t._e(),n("v-uni-view",{staticClass:"poster-info"},[n("v-uni-view",{staticClass:"title"},[t._v("提示：长按保存图片")]),n("v-uni-view",{staticClass:"pi-name"},[n("v-uni-input",{attrs:{type:"text",placeholder:"请输入海报名称"},model:{value:t.posterName,callback:function(e){t.posterName=e},expression:"posterName"}})],1)],1),n("v-uni-view",{staticClass:"poster-footer"},[n("v-uni-view",{staticClass:"ps-col-50"},[n("v-uni-view",{staticClass:"ps-btn ps-btn-lg ps-btn-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveLocal.apply(void 0,arguments)}}},[t._v("保存本地")])],1),n("v-uni-view",{staticClass:"ps-col-50"},[n("v-uni-view",{staticClass:"ps-btn ps-btn-lg ps-btn-blue-line",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$modal("ps-create-poster-modal","close")}}},[t._v("取消")])],1)],1)],1)],1)},i=[]}}]);